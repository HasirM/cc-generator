<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Transfer Certificate</title>
    <link rel="stylesheet" href="css/tc-style.css">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.css.map">

</head>
<body>
    <div id="left">
        <div class="form-left">
            <div class="container px-5 my-5">
                <div class="form-floating mb-3">
                    <input class="form-control" id="fullname" onkeyup="updatePreview('fullname')" type="text" placeholder="Full Name" data-sb-validations="required" onkeyup="updatePreview('fullname')"/>
                    <label for="fullName">Full Name</label>
                    <div class="invalid-feedback" data-sb-feedback="fullName:required">Full Name is required.</div>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="registrationNumber" onkeyup="updatePreview('registrationNumber')" onkeyup="updatePreview('fullname')" type="text" placeholder="Registration Number" data-sb-validations="required" />
                    <label for="registrationNumber">Registration Number</label>
                    <div class="invalid-feedback" data-sb-feedback="registrationNumber:required">Registration Number is required.</div>
                </div>
                <div class="mb-3">
                    <label class="form-label d-block">Gender</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="male" onclick="updatePreview('male')" type="radio" name="gender" data-sb-validations="required" />
                        <label class="form-check-label" for="male">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="female" onclick="updatePreview('female')" type="radio" name="gender" data-sb-validations="required" />
                        <label class="form-check-label" for="female">Female</label>
                    </div>
                    <div class="invalid-feedback" data-sb-feedback="gender:required">One option is required.</div>
                </div>
                <div class="form-floating mb-3">
                    <select class="form-select" id="degree" onchange="updateBranchOptions()" aria-label="Degree">
                        <option value="Select">Select</option>
                        <option value="B.E">B.E</option>
                        <option value="B.Tech">B.Tech</option>
                        <option value="M.E">M.E</option>
                    </select>
                    <label for="degree">Degree</label>
                </div>
                <div class="form-floating mb-3">
                    <select class="form-select" id="branch" onchange="updatePreview('branch')" aria-label="Branch">
                        <option value="1"></option>
                    </select>
                    <label for="branch">Branch</label>
                </div>
                <div class="form-floating mb-3">
                    <select class="form-select" id="duration" onchange="updatePreview('duration')" aria-label="Duration">
                        <option value="Select">Select</option>
                        <option value="Full Time">Full Time</option>
                        <option value="Part Time">Part Time</option>
                        <option value="Distant">Distant</option>
                    </select>
                    <label for="duration">Duration</label>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="year" onkeyup="updatePreview('year')" type="text" placeholder="Year" data-sb-validations="required" />
                    <label for="year">Year</label>
                    <div class="invalid-feedback" data-sb-feedback="year:required">Year is required.</div>
                </div>
                <div class="form-floating mb-3">
                    <textarea class="form-control" id="note" onkeyup="updatePreview('note')" type="text" placeholder="Note" style="height: 10rem;" data-sb-validations=""></textarea>
                    <label for="note">Note</label>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="place" onkeyup="updatePreview('place')" type="text" placeholder="Place" data-sb-validations="" />
                    <label for="place">Place</label>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="date" onkeyup="updatePreview('date')" type="text" placeholder="Date" data-sb-validations="" />
                    <label for="date">Date</label>
                </div>
            </div>
            <div class="download-btn">
                <button onclick="generatePDF()">Create Certificate</button>
            </div>
        </div>

        
    </div>

    <div id="right">
        <div class="certificate-container" id="certificate-final">
            <div class="certificate">
                <div class="water-mark-overlay"></div>
                <div class="certificate-header">
                    <div class="header">
                        <img src="assets/shanmugha-full-logo.png" class="logo" alt="">
                        <img src="assets/blank-profile-picture-973460_960_720.webp" class="profilepic" alt="">
                    </div>
                    <p class="certificate-title"><strong>TRANSFER CERTIFICATE</strong></p>
                </div>

                <div class="mini-header">
                    <p class="topic-title"> 
                        Admission No \ TC No: <span class="strong" id="res-tcno">--tcno--</span>
                    </p>
                    <p class="topic-title"> 
                        Register No: <span class="strong" id="res-registrationNumber">--reg--</span>
                    </p>
                </div>
                <div class="certificate-body">
                    <div class="certificate-content">
                        <p class="topic-title"> 
                            1. Name of the Student: <span class="strong" id="res-studentname">--fullname--</span>
                        </p>

                        <p class="topic-title"> 
                            2. Degree & Branch: <span class="strong" id="res-degree">--degree--</span> & <span class="strong" id="res-branch">--branch--</span>
                        </p>

                        <p class="topic-title"> 
                            3. Name of the Parent/Guardian: <span class="strong" id="res-parentname">--parentname--</span>
                        </p>

                        <p class="topic-title"> 
                            4. Nationality & Religion: <span class="strong" id="res-nationality">--nationality--</span> & <span class="strong" id="res-religion">--religion--</span>
                        </p>

                        <p class="topic-title"> 
                            5. Community & Caste: <span class="strong" id="res-community">--community--</span> & <span class="strong" id="res-caste">--caste--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            6. Gender: <span class="strong" id="res-gender">--gender--</span>
                        </p>

                        <p class="topic-title"> 
                            7. Date of birth as entered in the admission register: <span class="strong" id="res-dob">--dob--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            8. Semester in which the student was studying at the time of leaving: <span class="strong" id="res-semester">--semester--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            9. Date of admission of the course: <span class="strong" id="res-doa">--doa--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            10. Medium of study: <span class="strong" id="res-medium">--medium--</span>
                        </p>
    
                        <p class="topic-title"> 
                            11. Whether qualified for promotion of higher study: <span class="strong" id="res-qualified">--qualified--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            12. Date on which the student actually left the college: <span class="strong" id="res-leftdate">--leftdate--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            13. Date of application for Transfer Certificate: <span class="strong" id="res-tcdate">--tcdate--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            14. Reason for leaving: <span class="strong" id="res-tcreason">--tcreason--</span>
                        </p>
                        
                        <p class="topic-title"> 
                            15. Conduct and character: <span class="strong" id="res-character">--character--</span>
                        </p>
    
                        <div class="footer">
                            <div class="first">
                                <p>Place: <span id="res-place">--place--</span></p>
                                <p>Date: <span id="res-date">--date--</span></p>
                            </div>
                            
                            <p>College Seal</p>
    
                            <p>Principal</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    
 
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
    <script src="js/html2pdf.js"></script>
    <script>
        function addOptions(select, options) {
            for (let i = 0; i < options.length; i++) {
                let option = document.createElement('option');
                option.text = options[i];
                option.value = options[i];
                select.add(option);
            }
        }

        function updateBranchOptions() {
            const degree = document.getElementById('degree').value;
            document.getElementById("res-degree").innerText = degree;
            const branchSelect = document.getElementById('branch');
            while (branchSelect.options.length > 0) {
                branchSelect.options.remove(0);
            }
            if (degree === 'B.E') {
                addOptions(branchSelect, ['Select','Computer Science and Engineering', 'Biomedical Engineering','Electronics and Communication Engineering', 'Mechanical Engineering']);
            } else if (degree === 'B.Tech') {
                addOptions(branchSelect, ['Select','Artificial Intelligence and Data Science', 'Agriculture Engineering', 'Information Technology']);
            } else if (degree === 'M.E') {
                addOptions(branchSelect, ['Select','Computer Science and Engineering']);
            } 
        }

        function updatePreview(elementId) {

            if (elementId == 'male') {
                document.getElementById("his/her").innerText = "his";
                document.getElementById("designation").innerText = "Mr";
                document.getElementById("he/she").innerText = "He";
            }
            else if (elementId == 'female') {
                document.getElementById("his/her").innerText = "her";
                document.getElementById("designation").innerText = "Ms";
                document.getElementById("he/she").innerText = "She";
            }
            else{
                const value = document.getElementById(elementId).value;
                document.getElementById("res-"+elementId).innerText = value;
            }
            
        }

        function generatePDF() {
            const element = document.getElementById('certificate-final');
            const registrationNumber = document.getElementById('registrationNumber').value;
            const name = document.getElementById('fullname').value;

            const width = element.offsetWidth*(72/96);
            const height = element.offsetHeight*(72/96)+3;

            const opt = {
                margin: 1,
                filename: `CC_${registrationNumber}_${name}.pdf`,
                image: { type: 'jpeg', quality: 1000 },
                html2canvas: { scale: 10 },
                jsPDF: { unit: 'pt', format: [width, height], orientation: 'l' }
            };
            html2pdf().set(opt).from(element).save();
        }


    </script>
</body>
</html>
